FROM registry.docker.aws-us-west-2-infrastructure.socrata.net:5000/internal/secondary-watcher:2.1.11_5560_e90b78ba

ENV SECONDARY_ARTIFACT spandex-secondary-assembly.jar
ENV SECONDARY_CONFIG secondary.conf

ENV SPANDEX_SECONDARY_ANALYSIS_MAX_INPUT_LENGTH 64
ENV SPANDEX_SECONDARY_ANALYSIS_MAX_SHINGLE_LENGTH 32
ENV SPANDEX_SECONDARY_ES_CLUSTER_NAME spandex
ENV SPANDEX_SECONDARY_ES_PORT 9300
ENV SPANDEX_SECONDARY_ES_INDEX_ALIAS spandex
ENV SPANDEX_SECONDARY_NUM_WORKERS 5
ENV SPANDEX_SECONDARY_DATA_COPY_BATCH_SIZE 10000
ENV SPANDEX_SECONDARY_DATA_COPY_TIMEOUT 60s
ENV SPANDEX_SECONDARY_TYPE spandex

ENV LOG_LEVEL INFO

WORKDIR $SERVER_ROOT

COPY ${SECONDARY_CONFIG}.j2 $SERVER_ROOT/
COPY $SECONDARY_ARTIFACT $SERVER_ROOT/plugins/
